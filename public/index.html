<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hidden Light Photography Videos</title>
  <style>
    body { font-family: Arial, sans-serif; background: #111; color: #fff; padding: 2rem; }
    h1 { text-align: center; }
    input { width: 100%; padding: 0.5rem; font-size: 1rem; margin-bottom: 2rem; }
    .category { margin-bottom: 3rem; }
    .videos { display: flex; flex-wrap: wrap; gap: 1rem; }
    .video-card { background: #222; padding: 1rem; border-radius: 8px; width: 240px; box-shadow: 0 0 6px #000; }
    .video-card img { width: 100%; border-radius: 4px; }
    .video-card h3 { font-size: 1rem; margin-top: 0.5rem; color: #00bcd4; }
  </style>
</head>
<body>
  <h1>ðŸŽ¥ Hidden Light Photography</h1>
  <input type="text" id="search" placeholder="Search videos..." oninput="filterVideos()">
  <div id="gallery"></div>
  <script>
    let videoData = {};
    async function fetchVideos() {
      const res = await fetch('/api/fetchVideos');
      videoData = await res.json();
      renderVideos(videoData);
    }
    function filterVideos() {
      const query = document.getElementById('search').value.toLowerCase();
      const filtered = {};
      for (const cat in videoData) {
        const matching = videoData[cat].filter(v => v.title.toLowerCase().includes(query));
        if (matching.length) filtered[cat] = matching;
      }
      renderVideos(filtered);
    }
    function renderVideos(data) {
      const gallery = document.getElementById('gallery');
      gallery.innerHTML = '';
      for (const cat in data) {
        const section = document.createElement('div');
        section.className = 'category';
        section.innerHTML = `<h2>${cat}</h2>`;
        const container = document.createElement('div');
        container.className = 'videos';
        data[cat].forEach(video => {
          const card = document.createElement('div');
          card.className = 'video-card';
          card.innerHTML = `
            <a href="${video.url}" target="_blank">
              <img src="${video.thumbnail}" alt="${video.title}">
              <h3>${video.title}</h3>
            </a>`;
          container.appendChild(card);
        });
        section.appendChild(container);
        gallery.appendChild(section);
      }
    }
    fetchVideos();
  </script>
</body>
</html>
